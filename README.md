# 光遇自动送火 (SkyAutoLightGift)

光遇自动送火（SkyAutoLightGift）是一个开源项目，用于在游戏《光遇》中自动为星盘上的每位好友送出光之礼物。本应用通过无障碍服务获得星盘上每位好友的名字（TextView）的位置，并模拟点击操作以自动完成送火。

本应用在网易国服 0.12.5版本测试通过。

For English, please refer to the [English README](README_EN.md).

## 功能介绍

- 自动识别星盘上的好友名字
- 通过模拟点击进入好友菜单
- 自动点击送火按钮

## 原理说明

1. **识别好友名字的位置**：由于光遇星盘的好友位置是随机的，程序会先利用无障碍服务获取星盘上每位好友的名字（TextView）的位置。
2. **进入好友菜单**：
    - 尝试点击好友名字的中间位置。
    - 如果屏幕上其他好友的名字消失，只剩下目标好友的名字，则已成功进入菜单。
    - 如果未能进入好友菜单，则再尝试点击名字的左边缘和右边缘，因为名字有时会出现在星星的一侧。
4. **发送光之礼物**：通过点击绝对屏幕坐标完成送火。

## 免责声明

本应用通过模拟点击的方式实现自动送火，不会修改游戏内存，但使用第三方辅助工具皆有遭到封禁的可能。
开发者不对使用此应用导致的任何损失负责。

## 使用方法

1. 克隆本仓库到本地：
    ```bash
    git clone https://github.com/milkycandy/SkyAutoLightGift.git
    ```
2. 导入项目到Android Studio中，连接你的手机，构建并运行应用。
3. 填入送火按钮的屏幕坐标，找一个高矮个都能点到的位置。你可以使用Android开发者选项中的“指针位置”帮助你确定屏幕坐标。记得保存。
4. 点击启动键，程序会引导你开启无障碍服务和悬浮窗权限。
5. 悬浮窗出现后，打开光遇的星盘，翻到你希望送火的那一页，点击开始按钮。

## 需要改进的地方

1. **送火按钮点击**：目前点击送火按钮需要提前输入按钮的绝对屏幕坐标。需要找一个更好的实现方法。
2. **自动翻页**：计划实现送完一页好友后自动翻页并为下一页好友送出光之礼物。
3. **中断送火**：计划增加自动送火时的取消按钮。

## 已知问题

- 如果星盘分组名不为“好友”或“挚友”，程序会把星盘名也当作好友点击。
- 网易MuMu模拟器无法使用（无法获取屏幕布局）。

## 贡献

如果你有任何想法或建议，请联系 [ohayo@milkycandy.cn](mailto:ohayo@milkycandy.cn)。

## 许可证

该项目基于 GPL-3.0 许可证开源。详情请参见 [LICENSE](LICENSE) 文件。
